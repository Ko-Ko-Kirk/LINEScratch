function ScratchIt() { var t, e, n, o, i, r, a, c = !1, u = !1, d = !1, f = { x: 0, y: 0 }, l = { x: 0, y: 0 }, h = 1, s = [], p = 10, v = !1, g = function (t) { return "object" == typeof HTMLElement ? t instanceof HTMLElement : t && "object" == typeof t && null !== t && 1 === t.nodeType && "string" == typeof t.nodeName }, m = function () { var i = document.body; c && u && (e && o ? (t.appendChild(e), n = e.getContext("2d"), o.getContext("2d"), n.globalCompositeOperation = "destination-out", p = o.width / 2, window.PointerEvent ? (e.addEventListener("pointerdown", C), i.addEventListener("pointerup", I), i.addEventListener("pointerleave", I), i.addEventListener("pointermove", b)) : (e.addEventListener("mousedown", C), i.addEventListener("mouseup", I), i.addEventListener("mouseleave", I), i.addEventListener("mousemove", b), e.addEventListener("touchstart", C), i.addEventListener("touchend", I), i.addEventListener("touchmove", b)), window.addEventListener("resize", w(x, 200)), x(), window.requestAnimationFrame(y)) : console.error("Failed to load ScratchIt image")) }, y = function () { for (var t; s.length;)t = s.shift(), n.drawImage(o, t.x - o.width / 2, t.y - o.height / 2); window.requestAnimationFrame(y) }, w = function (t, e, n) { var o; return function () { var i = this, r = arguments, a = n && !o; clearTimeout(o), o = setTimeout(function () { o = null, n || t.apply(i, r) }, e), a && t.apply(i, r) } }, x = function () { h = 1 / (t.getBoundingClientRect().width / e.width) }, E = function (t, e) { var n, o, r, a, c; if ((e = !!e) && i && (n = i.x - t.x, o = i.y - t.y, (r = Math.sqrt(n * n + o * o)) > p)) for (n /= c = Math.ceil(r / p), o /= c, a = 1; a < c; a++)s.push({ x: Math.round(t.x + a * n), y: Math.round(t.y + a * o) }); t = { x: Math.round(t.x), y: Math.round(t.y) }, i = t, s.push(t) }, L = function (t) { t.preventDefault(), t.cancelBubble = !0, t.stopPropagation() }, C = function (t) { L(t), d = !0, f = S(t), l = T(t), E({ x: l.x * h, y: l.y * h }) }, b = function (t) { if (d) { L(t); var e = S(t); E({ x: (l.x + (e.x - f.x)) * h, y: (l.y + (e.y - f.y)) * h }, !0) } }, I = function (t) { d && (L(t), d = !1, i = void 0, f = { x: 0, y: 0 }, l = { x: 0, y: 0 }, M()) }, M = function () { var t, o, i = 0, c = e.width * e.height; if (!v) { for (t = n.getImageData(0, 0, e.width, e.height), o = 0; o < t.data.length; o += 4)t.data[o + 3] <= 128 && i++; i / c * 100 >= r && (a(), v = !0) } }, S = function (t) { return { x: t.targetTouches ? t.targetTouches[0].clientX : t.clientX, y: t.targetTouches ? t.targetTouches[0].clientY : t.clientY } }, T = function (t) { var n, o; t.target; if ("number" == typeof t.offsetX) n = t.offsetX, o = t.offsetY; else if (t.originalEvent && "number" == typeof t.originalEvent.layerX) n = t.oritinalEvent.layerX, o = t.oritinalEvent.layerY; else { var i = e.getBoundingClientRect(); n = t.touches[0].clientX - i.left, o = t.touches[0].clientY - i.top } return { x: n, y: o } }, A = function (t, e) { var n; "string" == typeof t && "function" == typeof e ? ((n = new Image).onload = function () { var t; -1 !== (t = navigator.appVersion).indexOf("MSIE") && parseFloat(t.split("MSIE")[1]) <= 9 ? setTimeout(function () { e(X(n)) }, 300) : e(X(n)) }, n.onerror = function () { e(!1) }, q(t) || (n.crossOrigin = ""), n.src = t) : e(!1) }, q = function (t) { var e = window.location; try { return new URL(t).origin === e.origin } catch (r) { var n, o, i = document.createElement("A"); return i.href = t, document.head.appendChild(i), i.href = i.href, n = (i.protocol + "//" + i.host).replace(/:\d+/, "").toLowerCase(), o = (e.protocol + "//" + e.host).replace(/:\d+/, "").toLowerCase(), document.head.removeChild(i), n === o } }, X = function (t) { var e = document.createElement("CANVAS"), n = e.getContext("2d"), o = t.naturalWidth, i = t.naturalHeight; return e.width = o, e.height = i, n.drawImage(t, 0, 0, o, i), e }; (function (n, i, d) { t = n; var f = arguments.length > 3 ? arguments[3] : function () { }, l = arguments.length > 4 ? 1 * arguments[4] : 0; if (!g(t)) throw 'ScratchIt() requires parent element to be a valid DOM Element."'; if ("function" != typeof f) throw "ScratchIt() requires callback to be a function"; if (l < 0 || l > 100) throw "ScratchIt() requires threshold to be between 0-100"; a = f, r = l, A(i, function (t) { c = !0, e = t, m() }), A(d, function (t) { u = !0, o = t, m() }) }).apply(this, arguments) } ScratchIt.isSupported = function () { var t = document.createElement("CANVAS"); return !("function" != typeof window.requestAnimationFrame || !t.getContext || !t.getContext("2d")) };
